LT.Namespace("Config"),LT.Config.name="header-beta2",LT.Config.init=function(){return this},LT.Config.refresh=function(){return this},LT.Namespace("Navbar"),LT.Navbar.name="header-beta2",LT.Navbar.show=function(name){var that=this;return $("#"+that.name+" nav ul li").each(function(){$(this).attr("data-name")===name&&$(this).addClass("active")}),that},LT.Navbar.dynmode=function(){var that=this;return LT.User.isLogin&&$("#"+that.name+" .header").addClass("header-simple")&&$("#"+that.name+" nav").hide(),that},LT.Namespace("Attention"),LT.Attention.get=function(){return LT.Biz.C.Attention.get.apply(LT.Biz.C.Connection,arguments)},LT.Attention.add=function(){return LT.Biz.C.Attention.add.apply(LT.Biz.C.Connection,arguments)},LT.Attention.remove=function(){return LT.Biz.C.Attention.remove.apply(LT.Biz.C.Connection,arguments)},LT.Namespace("Message"),LT.Message.send=function(){return LT.Biz.C.Message.send.apply(LT.Biz.C.Message,arguments)},LT.Namespace("Job"),LT.Job.apply=function(){var user_kind,i,loginSuccess,options={ids:"",job_kind:"",user_kinds:["0"],skip_check:!1,multi_select:!0,theme:{apply:{title:"投递确认",okBtn:"发送",cancelBtn:"取消"}},ext_options:{ext_apply_type:0},callback:null,deny:null,error:null},denyMsg="抱歉，此功能仅供$使用！";if(arguments.length<2)return!1;for(options.ids=String(arguments[0]||""),options.job_kind=arguments[1],i=2;i<arguments.length;i++)Array.isArray(arguments[i])?options.user_kinds=arguments[i]:LT.Object.isObject(arguments[i])?LT.Object.extend(options,arguments[i]):LT.Object.isFunction(arguments[i])&&(options.callback=arguments[i]);denyMsg=denyMsg.replace(/\$/g,options.user_kinds.join(",").replace(/0/g,"经理人").replace(/1/g,"企业用户").replace(/2/g,"猎头用户").replace(/,/g,"和")),loginSuccess=function(){if(user_kind=LT.User.user_kind,"0"==user_kind){var ApplyQueue=function(config){this.options=LT.Object.extend({},config),this.init()};return ApplyQueue.prototype.init=function(){var that=this;return that.options.skip_check?that.getResumeList():that.checkResumeStatus(),that},ApplyQueue.prototype.checkResumeStatus=function(){var that=this;return LT.ajax({url:LT.Env.cRoot+"apply/beforeapply.json",type:"POST",data:{job_kind:that.options.job_kind,job_id:that.options.ids,ext_apply_type:that.options.ext_options.ext_apply_type},dataType:"json",cache:!1,success:function(data){if(1===data.flag){var _data=data.data||{};if(2===_data.biz)switch(_data.status){case 0:case 1:that.viewDenied(data);break;case 2:that.viewResumeImprove(data);break;case 3:case 4:case 9:that.getResumeList(_data)}else _data.apply_overdone?$.dialog.error("<p class='text-center text-warning'><strong>投递失败！</strong></p><p>"+_data.msg+"</p>"):$.dialog.error(_data.msg||"校验默认简历状态失败！")}else $.dialog.alert(data.msg||"投递失败！")}}),that},ApplyQueue.prototype.getResumeList=function(data){var that=this,callback=function(data){var _data,_temp={ids:that.options.ids,job_kind:that.options.job_kind,multi_select:that.options.multi_select,theme:that.options.theme,ext_options:that.options.ext_options,skip_check:that.options.skip_check,callback:that.options.callback};3!=data.status&&4!=data.status||(_temp.status=data.status,_temp.msg=data.unfitOptionNames,that.options.theme.apply.okBtn="查看更多适合您的职位",that.options.theme.apply.cancelBtn="继续投递"),_data=LT.Object.extend(_temp,data.data),NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/apply/job_apply_7910eac1.js",_data,function(d){$.dialog({title:that.options.theme.apply.title,content:d,lock:!0})})};return data?callback&&callback.call(that,data):LT.ajax({url:LT.Env.cRoot+"apply/getresumes.json",type:"POST",dataType:"json",cache:!1,success:function(data){1===data.flag?callback&&callback.call(that,data.data):$.dialog.error(data.msg||"获取简历列表失败！")}}),that},ApplyQueue.prototype.viewDenied=function(data){var that=this,_data=LT.Object.extend({draft:1==data.status},data.data);return NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/apply/apply_denied_db7fadc1.js",_data,function(d){$.dialog({content:d,lock:!0})}),that},ApplyQueue.prototype.viewResumeImprove=function(data){var that=this,_data=LT.Object.extend({receiverName:1==that.options.job_kind?"猎头顾问":"HR",job_kind:that.options.job_kind,ext_apply_type:that.options.ext_options.ext_apply_type,callback:function(){that.getResumeList()}},data);return LT.Resume.improve(_data),that},new ApplyQueue(options)}},!LT.User.isLogin&&(window._gaq=window._gaq||[])&&window._gaq.push(["_trackPageview","/virtual/page_hjob/cover_show"]),LT.User.requireLogin({callback:function(){return user_kind=LT.User.user_kind,options.user_kinds.indexOf(user_kind)===-1?void $.dialog.error(denyMsg,function(){options.deny&&options.deny.call(options)}):(loginSuccess(),(window._gaq=window._gaq||[])&&window._gaq.push(["_trackPageview","/virtual/page_hjob/click_login"]),void((window._gaq=window._gaq||[])&&window._gaq.push(["_trackPageview","/virtual/cover_applyregister/click_login"])))},success:function(){return LT.User&&LT.User.get(),LT.Config&&LT.Config.refresh(),user_kind=LT.User.user_kind,options.user_kinds.indexOf(user_kind)===-1?($.dialog.error(denyMsg,function(){options.deny&&options.deny.call(options)}),void window.location.reload()):(window.location.href=LT.Env.wwwRoot,(window._gaq=window._gaq||[])&&window._gaq.push(["_trackPageview","/virtual/page_hjob/click_register"]),void((window._gaq=window._gaq||[])&&window._gaq.push(["_trackPageview","/virtual/button_applyregister/click_register"])))}})},LT.Job.favorite=function(options){var url,allowgroup,deny=options.deny;options=LT.Object.extend({user_kinds:["0"],job_id:"",job_kind:"",success:null,error:null,deny:null,callback:null},options),url="0"==options.status?LT.Env.cRoot+"job/favorite.json":LT.Env.cRoot+"job/cancelfavorite.json",delete options.deny,allowgroup=options.user_kinds.join(",").replace(/0/g,"经理人").replace(/1/g,"企业用户").replace(/2/g,"猎头用户").replace(/,/g,"和"),LT.Domain.use("www."+LT.Env.domain,function(){LT.User.requireLogin(function(){return options.user_kinds.indexOf(LT.User.user_kind)?void $.dialog.error("抱歉，此功能仅供"+allowgroup+"使用！",function(){deny&&deny.call(window)}):void LT.Domain.use("c."+LT.Env.domain,function(){LT.ajax({url:url,type:"POST",data:{job_id:options.job_id,job_kind:options.job_kind},dataType:"json",cache:!1,success:function(data){data&&1===data.flag&&"function"==typeof options.callback?options.callback(data):data.msg&&$.dialog.alert(data.msg)}})})})})},LT.Job.favorited=function(options){var allowgroup,deny=options.deny;options=LT.Object.extend({user_kinds:["0"],job_id:"",job_kind:"",success:null,error:null,deny:null,callback:null},options),delete options.deny,allowgroup=options.user_kinds.join(",").replace(/0/g,"经理人").replace(/1/g,"企业用户").replace(/2/g,"猎头用户").replace(/,/g,"和"),LT.Domain.use("www."+LT.Env.domain,function(){LT.User.requireLogin(function(){return options.user_kinds.indexOf(LT.User.user_kind)?void $.dialog.error("抱歉，此功能仅供"+allowgroup+"使用！",function(){deny&&deny.call(window)}):void LT.ajax({url:LT.Env.cRoot+"job/isfavorite.json",type:"POST",data:{job_id:options.job_id,job_kind:options.job_kind},dataType:"json",cache:!1,success:function(data){options.callback(data)}})})})},LT.Job.applied=function(){var options,i;if(LT.User.isLogin){if(options={ids:"",job_kind:"",callback:null},arguments.length<2)return!1;for(options.ids=String(arguments[0]||""),options.job_kind=arguments[1],i=2;i<arguments.length;i++)LT.Object.isObject(arguments[i])?LT.Object.extend(options,arguments[i]):LT.Object.isFunction(arguments[i])&&(options.callback=arguments[i]);"0"===LT.User.user_kind&&LT.Ajax({url:LT.Env.cRoot+"apply/isjobapplied.json",type:"POST",data:{job_id:options.ids,job_kind:options.job_kind},dataType:"json",success:function(data){1===data.flag&&options.callback&&options.callback.call(data.data)}})}},LT.Namespace("Module400"),LT.Module400.get=function(){var user_kind,i,options={ids:"",user_kinds:["0"],dialog:!0,callback:null,deny:null,error:null},denyMsg="抱歉，此功能仅供$使用！";if(arguments.length<1)return!1;for(options.ids=String(arguments[0]||""),i=1;i<arguments.length;i++)Array.isArray(arguments[i])?options.user_kinds=arguments[i]:LT.Object.isObject(arguments[i])?LT.Object.extend(options,arguments[i]):LT.Object.isFunction(arguments[i])&&(options.callback=arguments[i]);denyMsg=denyMsg.replace(/\$/g,options.user_kinds.join(",").replace(/0/g,"经理人").replace(/1/g,"企业用户").replace(/2/g,"猎头用户").replace(/,/g,"和")),LT.User.requireLogin(function(){return user_kind=LT.User.user_kind,options.user_kinds.indexOf(user_kind)===-1?void $.dialog.error(denyMsg,function(){options.deny&&options.deny.call(options)}):void("0"==user_kind&&LT.ajax({url:LT.Env.cRoot+"consult/checkuser4gettelnum/",type:"POST",data:{userh_id:options.ids},dataType:"json",cache:!1,success:function(data){var _callback,_minute,_second,_data;if(1==data.flag){if(!data.goldcard&&0==data.timeout)return NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/goldhuntertel/gold_400_show_4fb2cc9e.js",{showtype:"consult"},function(d){var _tn=this;$.dialog({title:"升级金卡会员",padding:0,content:$(d),lock:!0})}),!1;_callback=function(data){var _this=this;data.timeout>0&&(_this.dialog?NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/consult/consult_400_dialog_2a7d3231.js",data,function(d){$.dialog({title:"电话咨询",content:d,lock:!0})}):NodeTpl.get("//concat.lietou-static.com/pics/pc/revs/tpls/p/beta2/tel400/consult_400_show_3a33d806.js",data,function(d){_this.callback&&_this.callback.call(_this,d)}))},data.timeout>180?_callback.call(options,data):(_minute=Math.floor(data.timeout/60),_second=LT.Number.pad(data.timeout%60),_data=LT.Object.extend({minute:_minute,second:_second},data),NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/consult/consult_buy_c9b3940c.js",_data,function(d){$.dialog({title:"购买咨询时间",content:d,lock:!0,width:360,close:function(){_callback.call(options,_data)}})}))}else $.dialog.error(data.msg)}}))})},LT.Namespace("User.Profile"),LT.User.Profile.basic=function(callback){NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/user/profile_basic_e8904cd3.js",{callback:callback},function(d){$.dialog({title:!1,content:d,lock:!0,cancel:!1,dblclose:!1})})},LT.Namespace("scrollTop"),LT.scrollTop.init=function(){var goTop,_code=['<div class="fixed-aside">','<a class="fixed-go-top" href="javascript:;">','<i class="icon-32 icon-32-gotop"></i>','<span class="text-go-top">返回<br />顶部</span>',"</a>",'<a class="fixed-feed-back" href="https://www.liepin.com/user/feedback/" target="_blank">','<i class="icon-32 icon-32-feedback"></i>','<span class="text-feed-back">意见<br />反馈</span>',"</a>","</div>"].join("");$("body").append(_code),goTop=$(".fixed-aside .fixed-go-top"),$("html,body").scrollTop()>=300&&goTop.css("display","block"),$(window).bind("scroll",function(){var _top=LT.Page.scrollTop();_top>300?goTop.css("display","block"):goTop.css("display","none")}),goTop.bind("click",function(){$("html,body").animate({scrollTop:0},300)}),$(".fixed-aside>a").hover(function(){$(this).find("i").hide().siblings("span").show()},function(){$(this).find("span").hide().siblings("i").show()})},LT.Namespace("Report"),LT.Report.open=function(options){var allowgroup,deny=options.deny;options=LT.Object.extend({user_kinds:["0","2"],obj_type:"0",obj_id:"0",title:"",content:"",deny:null},options),delete options.deny,allowgroup=options.user_kinds.join(",").replace(/0/g,"经理人").replace(/1/g,"企业用户").replace(/2/g,"猎头用户").replace(/,/g,"和"),LT.Domain.use("www."+LT.Env.domain,function(){LT.User.requireLogin(function(){var html,cacheExt;return options.user_kinds.indexOf(LT.User.user_kind)<0?void $.dialog.error("抱歉，此功能仅供"+allowgroup+"使用！",function(){deny&&deny.call(window)}):(html=LT.String.stripScript(document.documentElement.innerHTML),"1"==options.obj_type&&(html=html.replace(/<img.*class=["']?telephone-img[^>]*>/gi,"<!--Telephone Image-->"),html=html.replace(/<img.*class=["']?email-img[^>]*>/gi,"<!--Email Image-->")),cacheExt={pageContent:html},void("0"===LT.User.user_kind&&LT.ajax({url:LT.Env.cRoot+"webcomplaint/editcomplaintdetail.json",type:"POST",cache:!1,data:{obj_type:options.obj_type,obj_id:options.obj_id},dataType:"json",success:function(data){0===data.flag?$.dialog.error(data.msg):(LT.Object.extend(options,cacheExt),NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/report/report_8eb03842.js",options,function(d){$.dialog({title:"举报",content:$(d),lock:!0})}))}})))})})},LT.Namespace("Resume"),LT.Resume.improve=function(options){var config=LT.Object.extend({job_kind:"",ext_apply_type:0,callback:function(){}},options);return!!config.job_kind&&(config.receiverName=1==config.job_kind?"猎头顾问":"HR",void NodeTpl.get("//concat.lietou-static.com/dev/c/pc/revs/v1/tpls/resume/resume_complete_layer_17ffb22d.js",config,function(d){$.dialog({content:d,lock:!0,padding:0})}))},LT.Namespace("UserC"),LT.UserC.Level={check:function(options){0==LT.User.user_kind&&LT.ajax({url:LT.Env.cRoot+"user/getusercinfo.json",type:"GET",dataType:"JSON",success:function(data){if(1===data.flag){var _level=data.data.level,_goldcard=data.data.goldcard,_tips="";switch(options.tipType){case 1:_tips='该企业暂不接受关注请求，建议您应聘<br />适合的企业职位。&nbsp;&nbsp;<a href="'+LT.Env.wwwRoot+'zhaopin/?salary=0$10&jobKind=2">搜索企业职位</a>';break;case 2:_tips='根据您当前的简历内容和职场资历，金卡服务暂时无法为您提供最佳服务<br />效果，建议您通过应聘企业职位的方式获得发展机会。&nbsp;&nbsp;<a href="'+LT.Env.wwwRoot+'zhaopin/?salary=0$10&jobKind=2">搜索企业职位</a>';break;case 3:_tips='该企业暂不接受在线咨询，建议您应聘<br />适合的企业职位。&nbsp;&nbsp;<a href="'+LT.Env.wwwRoot+'zhaopin/?salary=0$10&jobKind=2">搜索企业职位</a>';break;default:_tips='您目前暂未达到猎头顾问搜寻人选的条件，建议您通过<br />应聘企业职位的方式获得发展机会。&nbsp;&nbsp;<a href="'+LT.Env.wwwRoot+'zhaopin/?salary=0$10&jobKind=2">搜索企业职位</a>'}2==options.tipType?(0==_level||1==_level)&&options.callback&&options.callback.call(this,_tips):!_goldcard&&(0==_level||1==_level)&&options.callback&&options.callback.call(this,_tips)}}})}};